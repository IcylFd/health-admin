{"remainingRequest":"/Users/lifangdi/workspace/iview-admin/node_modules/babel-loader/lib/index.js!/Users/lifangdi/workspace/iview-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lifangdi/workspace/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lifangdi/workspace/iview-admin/src/components/cropper/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lifangdi/workspace/iview-admin/src/components/cropper/index.vue","mtime":1548038358000},{"path":"/Users/lifangdi/workspace/iview-admin/.babelrc","mtime":1548038358000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Cropper from 'cropperjs';\nimport './index.less';\nimport 'cropperjs/dist/cropper.min.css';\nexport default {\n  name: 'Cropper',\n  props: {\n    src: {\n      type: String,\n      default: ''\n    },\n    preview: {\n      type: Boolean,\n      default: true\n    },\n    moveStep: {\n      type: Number,\n      default: 4\n    },\n    cropButtonText: {\n      type: String,\n      default: '裁剪'\n    }\n  },\n  data: function data() {\n    return {\n      cropper: null,\n      insideSrc: ''\n    };\n  },\n  computed: {\n    imgId: function imgId() {\n      return \"cropper\".concat(this._uid);\n    },\n    previewId: function previewId() {\n      return \"cropper_preview\".concat(this._uid);\n    }\n  },\n  watch: {\n    src: function src(_src) {\n      this.replace(_src);\n    },\n    insideSrc: function insideSrc(src) {\n      this.replace(src);\n    }\n  },\n  methods: {\n    beforeUpload: function beforeUpload(file) {\n      var _this = this;\n\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function (event) {\n        _this.insideSrc = event.srcElement.result;\n      };\n\n      return false;\n    },\n    replace: function replace(src) {\n      this.cropper.replace(src);\n      this.insideSrc = src;\n    },\n    rotate: function rotate() {\n      this.cropper.rotate(90);\n    },\n    shrink: function shrink() {\n      this.cropper.zoom(-0.1);\n    },\n    magnify: function magnify() {\n      this.cropper.zoom(0.1);\n    },\n    scale: function scale(d) {\n      this.cropper[\"scale\".concat(d)](-this.cropper.getData()[\"scale\".concat(d)]);\n    },\n    move: function move() {\n      var _this$cropper;\n\n      (_this$cropper = this.cropper).move.apply(_this$cropper, arguments);\n    },\n    crop: function crop() {\n      var _this2 = this;\n\n      this.cropper.getCroppedCanvas().toBlob(function (blob) {\n        _this2.$emit('on-crop', blob);\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.$nextTick(function () {\n      var dom = document.getElementById(_this3.imgId);\n      _this3.cropper = new Cropper(dom, {\n        preview: \"#\".concat(_this3.previewId),\n        checkCrossOrigin: true\n      });\n    });\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cropper-wrapper\">\n    <div class=\"img-box\">\n      <img class=\"cropper-image\" :id=\"imgId\" alt=\"\">\n    </div>\n    <div class=\"right-con\">\n      <div v-if=\"preview\" class=\"preview-box\" :id=\"previewId\"></div>\n      <div class=\"button-box\">\n        <slot>\n          <Upload action=\"image/upload\" :before-upload=\"beforeUpload\">\n            <Button style=\"width: 150px;\" type=\"primary\">上传图片</Button>\n          </Upload>\n        </slot>\n        <div v-show=\"insideSrc\">\n          <Button type=\"primary\" @click=\"rotate\">\n            <Icon type=\"md-refresh\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"shrink\">\n            <Icon type=\"md-remove\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"magnify\">\n            <Icon type=\"md-add\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"scale('X')\">\n            <Icon custom=\"iconfont icon-shuipingfanzhuan\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"scale('Y')\">\n            <Icon custom=\"iconfont icon-chuizhifanzhuan\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"move(0, -moveStep)\">\n            <Icon type=\"md-arrow-round-up\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"move(-moveStep, 0)\">\n            <Icon type=\"md-arrow-round-back\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"move(0, moveStep)\">\n            <Icon type=\"md-arrow-round-down\" :size=\"18\"/>\n          </Button>\n          <Button type=\"primary\" @click=\"move(moveStep, 0)\">\n            <Icon type=\"md-arrow-round-forward\" :size=\"18\"/>\n          </Button>\n          <Button style=\"width: 150px;margin-top: 10px;\" type=\"primary\" @click=\"crop\">{{ cropButtonText }}</Button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Cropper from 'cropperjs'\nimport './index.less'\nimport 'cropperjs/dist/cropper.min.css'\nexport default {\n  name: 'Cropper',\n  props: {\n    src: {\n      type: String,\n      default: ''\n    },\n    preview: {\n      type: Boolean,\n      default: true\n    },\n    moveStep: {\n      type: Number,\n      default: 4\n    },\n    cropButtonText: {\n      type: String,\n      default: '裁剪'\n    }\n  },\n  data () {\n    return {\n      cropper: null,\n      insideSrc: ''\n    }\n  },\n  computed: {\n    imgId () {\n      return `cropper${this._uid}`\n    },\n    previewId () {\n      return `cropper_preview${this._uid}`\n    }\n  },\n  watch: {\n    src (src) {\n      this.replace(src)\n    },\n    insideSrc (src) {\n      this.replace(src)\n    }\n  },\n  methods: {\n    beforeUpload (file) {\n      const reader = new FileReader()\n      reader.readAsDataURL(file)\n      reader.onload = (event) => {\n        this.insideSrc = event.srcElement.result\n      }\n      return false\n    },\n    replace (src) {\n      this.cropper.replace(src)\n      this.insideSrc = src\n    },\n    rotate () {\n      this.cropper.rotate(90)\n    },\n    shrink () {\n      this.cropper.zoom(-0.1)\n    },\n    magnify () {\n      this.cropper.zoom(0.1)\n    },\n    scale (d) {\n      this.cropper[`scale${d}`](-this.cropper.getData()[`scale${d}`])\n    },\n    move (...argu) {\n      this.cropper.move(...argu)\n    },\n    crop () {\n      this.cropper.getCroppedCanvas().toBlob(blob => {\n        this.$emit('on-crop', blob)\n      })\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      let dom = document.getElementById(this.imgId)\n      this.cropper = new Cropper(dom, {\n        preview: `#${this.previewId}`,\n        checkCrossOrigin: true\n      })\n    })\n  }\n}\n</script>\n"],"sourceRoot":"src/components/cropper"}]}