{"remainingRequest":"/Users/lifangdi/workspace/iview-admin/node_modules/babel-loader/lib/index.js!/Users/lifangdi/workspace/iview-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lifangdi/workspace/iview-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lifangdi/workspace/iview-admin/src/components/drag-drawer/drag-drawer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lifangdi/workspace/iview-admin/src/components/drag-drawer/drag-drawer.vue","mtime":1548038358000},{"path":"/Users/lifangdi/workspace/iview-admin/.babelrc","mtime":1548038358000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lifangdi/workspace/iview-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/lifangdi/workspace/iview-admin/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport RenderDom from '@/libs/render-dom';\nimport DragDrawerTrigger from './drag-drawer-trigger.vue';\nimport Mixin from './mixin';\nimport { on, off } from '@/libs/tools';\nimport './index.less';\nexport default {\n  name: 'BDrawer',\n  components: {\n    RenderDom: RenderDom,\n    DragDrawerTrigger: DragDrawerTrigger\n  },\n  mixins: [Mixin],\n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    },\n    width: {\n      type: [String, Number],\n      default: 256\n    },\n    // 是否可拖动修改宽度\n    draggable: {\n      type: Boolean,\n      default: false\n    },\n    // 最小拖动宽度\n    minWidth: {\n      type: [String, Number],\n      default: 256\n    }\n  },\n  data: function data() {\n    return {\n      canMove: false,\n      wrapperWidth: 0,\n      wrapperLeft: 0\n    };\n  },\n  computed: {\n    outerClasses: function outerClasses() {\n      var classesArray = [\"\".concat(this.prefix, \"-wrapper\"), this.canMove ? 'no-select pointer-events-none' : ''];\n      return classesArray.join(' ');\n    },\n    placement: function placement() {\n      return this.$attrs.placement;\n    },\n    innerWidth: function innerWidth() {\n      var width = this.width;\n      return width <= 100 ? this.wrapperWidth * width / 100 : width;\n    },\n    triggerStyle: function triggerStyle() {\n      var _ref;\n\n      return _ref = {}, _defineProperty(_ref, this.placement, \"\".concat(this.innerWidth, \"px\")), _defineProperty(_ref, \"position\", this.$attrs.inner ? 'absolute' : 'fixed'), _ref;\n    }\n  },\n  methods: {\n    handleInput: function handleInput(status) {\n      this.$emit('input', status);\n    },\n    handleTriggerMousedown: function handleTriggerMousedown(event) {\n      this.canMove = true;\n      this.$emit('on-resize-start'); // 防止鼠标选中抽屉中文字，造成拖动trigger触发浏览器原生拖动行为\n\n      window.getSelection().removeAllRanges();\n    },\n    handleMousemove: function handleMousemove(event) {\n      if (!this.canMove) return; // 更新容器宽度和距离左侧页面距离，如果是window则距左侧距离为0\n\n      this.setWrapperWidth();\n      var left = event.pageX - this.wrapperLeft; // 如果抽屉方向为右边，宽度计算需用容器宽度减去left\n\n      var width = this.placement === 'right' ? this.wrapperWidth - left : left; // 限定做小宽度\n\n      width = Math.max(width, parseFloat(this.minWidth));\n      event.atMin = width === parseFloat(this.minWidth); // 如果当前width不大于100，视为百分比\n\n      if (width <= 100) width = width / this.wrapperWidth * 100;\n      this.$emit('update:width', parseInt(width));\n      this.$emit('on-resize', event);\n    },\n    handleMouseup: function handleMouseup(event) {\n      this.canMove = false;\n      this.$emit('on-resize-end');\n    },\n    setWrapperWidth: function setWrapperWidth() {\n      var _this$$refs$drawerWra = this.$refs.drawerWrapper.$el.getBoundingClientRect(),\n          width = _this$$refs$drawerWra.width,\n          left = _this$$refs$drawerWra.left;\n\n      this.wrapperWidth = width;\n      this.wrapperLeft = left;\n    }\n  },\n  mounted: function mounted() {\n    on(document, 'mousemove', this.handleMousemove);\n    on(document, 'mouseup', this.handleMouseup);\n    this.setWrapperWidth();\n  },\n  beforeDestroy: function beforeDestroy() {\n    off(document, 'mousemove', this.handleMousemove);\n    off(document, 'mouseup', this.handleMouseup);\n  }\n};",{"version":3,"sources":["drag-drawer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Drawer ref=\"drawerWrapper\"\n          :value=\"value\"\n          @input=\"handleInput\"\n          :width=\"width\"\n          :class-name=\"outerClasses\"\n          v-bind=\"$attrs\"\n          v-on=\"$listeners\">\n    <!-- 所有插槽内容显示在这里 ↓ -->\n\n    <template v-for=\"(slots, slotsName) in $slots\">\n      <template v-if=\"slotsName !== 'default'\">\n        <render-dom v-for=\"(render, index) in slots\"\n                    :key=\"`b_drawer_${slotsName}_${index}`\"\n                    :render=\"() => render\"\n                    :slot=\"slotsName\">\n        </render-dom>\n      </template>\n      <template v-else>\n        <div :class=\"`${prefix}-body-wrapper`\"\n             :key=\"`b_drawer_${slotsName}`\">\n          <render-dom v-for=\"(render, index) in slots\"\n                      :key=\"`b_drawer_${slotsName}_${index}`\"\n                      :render=\"() => render\"\n                      :slot=\"slotsName\">\n          </render-dom>\n        </div>\n      </template>\n    </template>\n    <!-- 所有插槽内容显示在这里 ↑ -->\n    <div v-if=\"draggable\"\n         :style=\"triggerStyle\"\n         :class=\"`${prefix}-trigger-wrapper`\"\n         @mousedown=\"handleTriggerMousedown\">\n      <slot name=\"trigger\">\n        <drag-drawer-trigger></drag-drawer-trigger>\n      </slot>\n    </div>\n    <div v-if=\"$slots.footer\"\n         :class=\"`${prefix}-footer`\">\n      <slot name=\"footer\"></slot>\n    </div>\n  </Drawer>\n</template>\n\n<script>\nimport RenderDom from '@/libs/render-dom'\nimport DragDrawerTrigger from './drag-drawer-trigger.vue'\nimport Mixin from './mixin'\nimport { on, off } from '@/libs/tools'\nimport './index.less'\nexport default {\n  name: 'BDrawer',\n  components: {\n    RenderDom,\n    DragDrawerTrigger\n  },\n  mixins: [Mixin],\n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    },\n    width: {\n      type: [String, Number],\n      default: 256\n    },\n    // 是否可拖动修改宽度\n    draggable: {\n      type: Boolean,\n      default: false\n    },\n    // 最小拖动宽度\n    minWidth: {\n      type: [String, Number],\n      default: 256\n    }\n  },\n  data () {\n    return {\n      canMove: false,\n      wrapperWidth: 0,\n      wrapperLeft: 0\n    }\n  },\n  computed: {\n    outerClasses () {\n      const classesArray = [\n        `${this.prefix}-wrapper`,\n        this.canMove ? 'no-select pointer-events-none' : ''\n      ]\n      return classesArray.join(' ')\n    },\n    placement () {\n      return this.$attrs.placement\n    },\n    innerWidth () {\n      const width = this.width\n      return width <= 100 ? (this.wrapperWidth * width) / 100 : width\n    },\n    triggerStyle () {\n      return {\n        [this.placement]: `${this.innerWidth}px`,\n        position: this.$attrs.inner ? 'absolute' : 'fixed'\n      }\n    }\n  },\n  methods: {\n    handleInput (status) {\n      this.$emit('input', status)\n    },\n    handleTriggerMousedown (event) {\n      this.canMove = true\n      this.$emit('on-resize-start')\n      // 防止鼠标选中抽屉中文字，造成拖动trigger触发浏览器原生拖动行为\n      window.getSelection().removeAllRanges()\n    },\n    handleMousemove (event) {\n      if (!this.canMove) return\n      // 更新容器宽度和距离左侧页面距离，如果是window则距左侧距离为0\n      this.setWrapperWidth()\n      const left = event.pageX - this.wrapperLeft\n      // 如果抽屉方向为右边，宽度计算需用容器宽度减去left\n      let width = this.placement === 'right' ? this.wrapperWidth - left : left\n      // 限定做小宽度\n      width = Math.max(width, parseFloat(this.minWidth))\n      event.atMin = width === parseFloat(this.minWidth)\n      // 如果当前width不大于100，视为百分比\n      if (width <= 100) width = (width / this.wrapperWidth) * 100\n      this.$emit('update:width', parseInt(width))\n      this.$emit('on-resize', event)\n    },\n    handleMouseup (event) {\n      this.canMove = false\n      this.$emit('on-resize-end')\n    },\n    setWrapperWidth () {\n      const {\n        width,\n        left\n      } = this.$refs.drawerWrapper.$el.getBoundingClientRect()\n      this.wrapperWidth = width\n      this.wrapperLeft = left\n    }\n  },\n  mounted () {\n    on(document, 'mousemove', this.handleMousemove)\n    on(document, 'mouseup', this.handleMouseup)\n    this.setWrapperWidth()\n  },\n  beforeDestroy () {\n    off(document, 'mousemove', this.handleMousemove)\n    off(document, 'mouseup', this.handleMouseup)\n  }\n}\n</script>\n"],"sourceRoot":"src/components/drag-drawer"}]}